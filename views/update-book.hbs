<section class="py-5 container">
  {{#each book}}
  <form action="/books/update" method="POST" enctype="multipart/form-data">

    <input name="id" type="hidden" value="{{this.id}}" />

    <div class="form-outline mb-4">
      <input type="text" name="isbn" value="{{this.isbn}}" class="form-control form-control-lg" disabled/>
      <label class="form-label">Isbn (must be unique)</label>
    </div>

    <div class="form-outline mb-4">
      <input type="text" name="title" value="{{this.title}}" class="form-control form-control-lg" required/>
      <label class="form-label">Title</label>
    </div>

    <div class="form-outline mb-4">
      <input type="text" name="authors" value="{{this.authors}}" class="form-control form-control-lg" required/>
      <label class="form-label">Authors</label>
    </div>

    <div class="form-outline mb-4">
      <input type="number" min="0" step="0.01" name="price" value="{{this.price}}" class="form-control form-control-lg" required/>
      <label class="form-label">Price</label>
    </div>

    <div class="form-outline mb-4">
      <label for="sel1">Language:</label>
      <select name="language" class="form-control" id="sel1">
        <option id="English">English</option>
        <option id="Arabic">Arabic</option>
        <option id="French">French</option>
        <option id="Spanish">Spanish</option>
        <option id="German">German</option>
        <option id="Russian">Russian</option>
      </select>
    </div>

    <div class="form-outline mb-4">
      <input id="myDate" type="date" name="publishDate" class="form-control form-control-lg" required/>
      <label class="form-label">Publish Date</label>
    </div>

    <div class="form-outline mb-4">
      <input type="number" min="0" step="1" name="pages" value="{{this.pageCount}}" class="form-control form-control-lg" required/>
      <label class="form-label">Pages</label>
    </div>

    <div class="form-outline mb-4">
      <input type="text" name="publisher" value="{{this.publisher}}" class="form-control form-control-lg" required/>
      <label class="form-label">Publisher</label>
    </div>

    <div class="form-outline mb-4">
      <input id="updateGenre" type="text" name="genres" value="{{genres}}" class="form-control tagin" data-separator=" "/>
      <label class="form-label">Genres</label>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea name="description" class="form-control" id="description" rows="3">{{this.description}}</textarea>
    </div>

    <div class="form-group">
      <label for="coverImage">Book Cover (leave empty if don't want to change)</label>
      <input name="coverImage" type="file" class="form-control-file" id="coverImage">
    </div>

    <!-- Submit button -->
    <input type="submit" value="Update" class="btn btn-primary btn-lg btn-block">
    {{/each}}
  </form>

  <script>
    const genres = "{{genres}}";
    const language = "{{language}}"
    document.getElementById('updateGenre').value = genres;
    if(language) {
      document.getElementById(language)?.setAttribute("selected", "true");
    }
    const publishDate = "{{publishDate}}"
    document.getElementById("myDate").value = publishDate;
  </script>
</section>